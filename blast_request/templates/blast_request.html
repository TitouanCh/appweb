{% extends "base.html" %}

{% block title %}Accéder aux Bases de Données{% endblock %}

{% block content %}

<h1>Accéder aux informations complémentaires des bases de données</h1>

<form method="post" action="{% url 'blast_request' %}">
    {% csrf_token %}
    <div style="margin-bottom: 20px;">
        <label for="database"><strong>Sélectionnez une base de données :</strong></label>
        <select id="database" name="database" required>
            <option value="" disabled selected>-- Choisir une base --</option>
            {% for db in databases %}
                <option value="{{ db.id }}">{{ db.name }}</option>
            {% endfor %}
        </select>
    </div>

    <div style="margin-bottom: 20px;">
        <label for="sequence"><strong>Entrez une séquence :</strong></label>
        <textarea id="sequence" name="sequence" rows="5" cols="50" 
                  placeholder="Collez votre séquence ici (nucléotidique ou peptidique)" required></textarea>
    </div>

    <button type="submit">Accéder</button>
</form>

<!-- Affichage de l'URL générée si disponible -->
{% if redirect_url %}
    <div style="margin-top: 20px; padding: 10px; border: 1px solid #ccc; background-color: #f9f9f9;">
        <p>
            Votre séquence a été analysée. Cliquez sur le lien ci-dessous pour accéder à l'outil approprié :
        </p>
        <a href="{{ redirect_url }}" target="_blank" style="color: #007bff; text-decoration: underline; font-weight: bold;">
            Accéder à l'outil
        </a>
    </div>
{% endif %}

<!-- Affichage des erreurs -->
{% if error_message %}
    <div style="margin-top: 20px; padding: 10px; border: 1px solid red; background-color: #ffe5e5;">
        <p style="color: red;">Erreur : {{ error_message }}</p>
    </div>
{% endif %}

{% endblock %}
